name="polybar"
desc="A fast and easy-to-use status bar"
version="3.3.1"
revision="1"
website="https://github.com/jaagr/polybar"
license="MIT"
depends="cairo xcb-util-image xcb-util-wm xcb-util-xrm xcb-util-cursor"
optdepends="alsa-lib pulseaudio libmpdclient libnl wireless_tools jsoncpp i3-wm ttf-unifont siji-git xorg-fonts-misc curl"
makedepends="cmake git python python2 pkg-config"
conflicts="polybar-git"

# TODO: git-tag source?
source="${website}/releases/download/${version}/polybar-${version}.tar"
sourcetype="compressed"

shoppebuild() {
	getpkg
	cd "$name"
	mkdir build || exit 1
	cmake -DCMAKE_INSTALL_PREFIX=/usr ..
	cmake --build .
}

shoppeinstall() {
  cmake --build "${name}/build" --target install -- DESTDIR="../content"
  install -Dm644 "${name}/LICENSE" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
